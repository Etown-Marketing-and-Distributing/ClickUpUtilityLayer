# ClickUpAPI Documentation

## Overview
The `ClickUpAPI` class provides methods to interact with the ClickUp API, including creating, editing, and deleting tasks, as well as handling custom fields, assignees, and attachments.

---

## Constructor

### `constructor(apiKey)`
Initializes the `ClickUpAPI` class.

- **Parameters**:
  - `apiKey` (string): The API key for authenticating with the ClickUp API.
- **Throws**:
  - Error if the `apiKey` is not provided.

---

## Methods

### `postTask(body, listId, teamId, taskId = null)`
Creates or updates a task in ClickUp.

- **Parameters**:
  - `body` (object): The task details.
    - `name` (string): The name of the task (required).
    - `description` (string): The description of the task.
    - `custom_fields` (array): Custom fields for the task.
    - `assignees` (array): List of assignee emails.
    - `attachments` (array): List of attachment objects (`{ fileName, url }`).
  - `listId` (string): The ID of the ClickUp list (required).
  - `teamId` (string): The ID of the ClickUp team (required).
  - `taskId` (string, optional): The ID of the task to update. If not provided, a new task is created.
- **Returns**:
  - The created or updated task object.
- **Throws**:
  - Error if the API request fails.

---

### `deleteTask(taskId)`
Deletes a task in ClickUp.

- **Parameters**:
  - `taskId` (string): The ID of the task to delete (required).
- **Returns**:
  - An object containing the HTTP status code of the deletion request.
- **Throws**:
  - Error if the `taskId` is not provided or the API request fails.

---

### `convertCustomFields(customFields, listId)`
Maps custom fields to their corresponding IDs in the specified list.

- **Parameters**:
  - `customFields` (array): Array of custom field objects (`{ name, value }`).
  - `listId` (string): The ID of the ClickUp list.
- **Returns**:
  - An array of mapped custom fields with their IDs and values.

---

### `convertAssignees(assignees, listId)`
Maps assignee emails to their corresponding user IDs in the specified list.

- **Parameters**:
  - `assignees` (array): Array of assignee emails.
  - `listId` (string): The ID of the ClickUp list.
- **Returns**:
  - An array of mapped assignee user IDs.

---

### `addAttachments(taskId, attachments)`
Uploads attachments to a task.

- **Parameters**:
  - `taskId` (string): The ID of the task to add attachments to.
  - `attachments` (array): Array of attachment objects (`{ fileName, url }`).
- **Returns**:
  - An array of attachment IDs.

---

### `getCustomFieldsInList(listId)`
Fetches the custom fields available in a specific list.

- **Parameters**:
  - `listId` (string): The ID of the ClickUp list.
- **Returns**:
  - An array of custom fields available in the list.
- **Throws**:
  - Error if the API request fails.

---

### `getUsersInList(listId)`
Fetches the users available in a specific list.

- **Parameters**:
  - `listId` (string): The ID of the ClickUp list.
- **Returns**:
  - An array of users available in the list.
- **Throws**:
  - Error if the API request fails.

---

### `postAttachment(taskId, attachment)`
Uploads a single attachment to a task.

- **Parameters**:
  - `taskId` (string): The ID of the task to add the attachment to.
  - `attachment` (object): The attachment object (`{ fileName, url }`).
- **Returns**:
  - The uploaded attachment object.
- **Throws**:
  - Error if the API request fails.

---

### `createRequestOptions(method, body = null)`
Creates the request options for an API call.

- **Parameters**:
  - `method` (string): The HTTP method (e.g., `GET`, `POST`, `PUT`, `DELETE`).
  - `body` (object, optional): The request body.
- **Returns**:
  - An object containing the request options.

---

### `validateTaskInput(body, listId, teamId)`
Validates the input for creating or updating a task.

- **Parameters**:
  - `body` (object): The task details.
  - `listId` (string): The ID of the ClickUp list.
  - `teamId` (string): The ID of the ClickUp team.
- **Throws**:
  - Error if any required parameter is missing.

---

## Example Usage

```javascript
import ClickUpAPI from './ClickUpAPI.js';

const apiKey = process.env.CLICKUP_API_KEY;
const clickUp = new ClickUpAPI(apiKey);

const taskBody = {
  name: "New Task",
  description: "Task description",
  assignees: ["user@example.com"],
  custom_fields: [{ name: "Priority", value: "High" }],
};

const listId = "12345";
const teamId = "67890";

clickUp.postTask(taskBody, listId, teamId)
  .then(response => console.log("Task created:", response))
  .catch(error => console.error("Error:", error));